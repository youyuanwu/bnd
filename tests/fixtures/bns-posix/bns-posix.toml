include_paths = ["/usr/include/x86_64-linux-gnu", "/usr/include"]

[output]
name = "posix"
file = "bns-posix.winmd"

# Partition 1: fcntl — creat + O_* flags
# open/openat/fcntl are variadic and will be auto-skipped
[[partition]]
namespace = "posix.fcntl"
library = "c"
headers = ["fcntl.h"]
traverse = ["fcntl.h", "bits/fcntl-linux.h"]

# Partition 2: unistd — read/write/close/lseek
[[partition]]
namespace = "posix.unistd"
library = "c"
headers = ["unistd.h"]
traverse = ["unistd.h"]

# Partition 3: sys/stat — struct stat + stat/fstat/chmod + S_* constants
[[partition]]
namespace = "posix.stat"
library = "c"
headers = ["sys/stat.h"]
traverse = ["sys/stat.h", "bits/struct_stat.h", "bits/types/struct_timespec.h"]

# Partition 4: sys/mman — mmap/munmap/mprotect + MAP_*/PROT_* constants
[[partition]]
namespace = "posix.mmap"
library = "c"
headers = ["sys/mman.h"]
traverse = ["sys/mman.h", "bits/mman-linux.h", "bits/mman-map-flags-generic.h"]

# Partition 5: dirent — opendir/readdir/closedir + struct dirent + DT_* constants
[[partition]]
namespace = "posix.dirent"
library = "c"
headers = ["dirent.h"]
traverse = ["dirent.h", "bits/dirent.h"]

# Partition 6: sys/socket — socket/bind/listen/accept + AF_*/SOCK_*/SO_* constants
[[partition]]
namespace = "posix.socket"
library = "c"
headers = ["sys/socket.h"]
traverse = [
    "sys/socket.h",
    "bits/socket.h",
    "bits/socket_type.h",
    "bits/socket-constants.h",
    "bits/types/struct_iovec.h",
]

# Partition 7: netinet/in + arpa/inet — sockaddr_in, in6_addr, inet_pton/ntop
[[partition]]
namespace = "posix.inet"
library = "c"
headers = ["netinet/in.h", "arpa/inet.h"]
traverse = ["netinet/in.h", "arpa/inet.h"]

# Partition 8: netdb — getaddrinfo/freeaddrinfo + struct addrinfo + AI_* constants
[[partition]]
namespace = "posix.netdb"
library = "c"
headers = ["netdb.h"]
traverse = ["netdb.h", "bits/netdb.h"]
